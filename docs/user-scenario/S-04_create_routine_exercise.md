# 화면기획서: S-04 루틴 만들기 - 세부 운동 선택 화면

---

## 📌 개요

* **화면명**: 루틴 만들기 - 세부 운동 선택
* **목적**: 생성 모드에서는 선택한 부위의 운동을 고르고, 편집 모드에서는 기존 운동 수정과 새 운동 추가를 모두 지원한다

---

## 📂 구성 요소

* **제목**: `[선택한 부위명] 운동`
* **운동 리스트 (세로 리스트)**:

  * 가슴 예시: 벤치프레스, 인클라인 벤치프레스, 덤벨 플라이, 푸쉬업
  * 등 예시: 바벨 로우, 렛풀다운, 데드리프트, 시티드 로우
  * 유산소 예시: 러닝머신, 싸이클, 스텝퍼, 줄넘기

* **편집 모드 리스트 (세로 리스트)**:

  * 진입 조건: S-02 프리셋 항목에서 `[편집]` 선택
  * 표시 항목:
    * 선택한 루틴에 포함된 운동명 목록 (예: 벤치프레스, 랫풀다운)
    * 리스트 하단 `[새 운동 추가하기]` 액션
  * 각 운동 항목 우측 `>` 아이콘은 사용하지 않는다
  * 각 운동 항목 관리 액션:
    * 우측 `⋮` 버튼 클릭 시 액션 메뉴 노출
    * 또는 항목 롱클릭 시 동일 액션 메뉴 노출
    * 액션 메뉴: `[편집] [삭제]`
  * 사용자 질문 의도:
    * 기존 운동을 고쳐야 하면 목록에서 선택
    * 루틴에 운동을 더 넣고 싶으면 `[새 운동 추가하기]` 선택
  * 항목 기본 클릭(탭)은 곧바로 수정 진입(= 편집)으로 처리하고 S-05로 이동하며 기존 입력값(세트별 중량/횟수, 유산소 시간)을 함께 전달
  * 기존 운동 편집 진입 시 S-05로 `routineExerciseId`를 함께 전달해 수정 대상을 식별한다
  * `[삭제]` 선택 시 삭제 확인 후 API를 호출해 해당 운동 항목을 루틴에서 제거한다
    * 호출: `DELETE /api/routines/:routineId/exercises/:routineExerciseId`
    * 성공(204): 목록에서 즉시 제거하고 현재 화면 유지
    * 실패(4xx/5xx): 실패 문구를 노출하고 기존 목록 상태 유지
  * `[새 운동 추가하기]` 선택 시 생성 모드와 동일한 운동 마스터 리스트(부위 기준)에서 신규 운동을 선택해 S-05로 이동

* **모바일 UI 기준**:

  * 항목 전체를 탭 가능하게 구성
  * 편집 모드에서는 각 항목 우측에 `⋮` 액션 버튼 배치
  * 긴 설명 없이 운동명만 표시

---

## 🔁 동작

* 운동 항목 탭 시 ➝ S-05 세트별 수행 정보 입력 화면 이동
* 이 단계에서는 운동명만 선택하고, 세트별 `중량/횟수` 정보는 S-05에서 채운다
* 루틴 추가 플로우에서 선택/입력한 draft는 로컬에 유지된다
* S-05에서 `[운동 더 추가]`로 복귀 후 다시 진입해도 이전 입력 상태를 복원해 표시한다
* 편집 모드에서는 "루틴 내 운동 목록"에서 수정 대상을 고른 뒤 S-05로 진입한다
* 편집 모드에서 `[삭제]`는 API 성공 시에만 목록에서 제거된다
* 편집 모드에서 `[새 운동 추가하기]`를 선택하면 기존 루틴에 없는 운동을 선택해 신규 항목으로 추가할 수 있다
* 편집 모드에서 기존 운동/신규 운동은 서로 다른 저장 API 경로를 사용한다 (상세는 S-05에서 정의)
