# 개발 계획서: P-12 프리셋 선택 후 운동 진행 연계 수정

---

## 📌 개발 목표

- `S-02`에서 프리셋 선택 시 즉시 `S-07`로 전환되도록 라우팅을 복구한다.
- 선택된 프리셋 데이터가 `Workout` 화면에 안정적으로 전달되도록 데이터 계약을 명확히 한다.
- 테스트로 프리셋→운동 진행 연계를 회귀 방지한다.

---

## 🔍 현재 문제

- `PresetSelection`에서 프리셋 선택 시 `console.log`만 수행하고 실제 `navigate('/workout')`가 호출되지 않음.
- `Workout`은 임시 전역 변수(`tempWorkoutData`)에 의존해 진입 데이터가 없으면 진행이 끊김.
- 시나리오 문서(`S-02`, `S-07`)의 “선택 즉시 운동 진행” 동작과 구현이 불일치함.

---

## 🛠️ 수정 범위

### 1) 프리셋 선택 화면 (`PresetSelection`)
- [ ] 선택된 프리셋을 찾아 `ExerciseDetail[]`로 변환
- [ ] `/workout`으로 이동하며 라우터 state로 데이터 전달
- [ ] 예외 케이스(프리셋 미존재) 처리

### 2) 운동 진행 화면 (`Workout`)
- [ ] `useLocation`에서 전달된 운동 데이터 우선 사용
- [ ] 기존 임시 전역 데이터 fallback 유지(기존 테스트/플로우 호환)
- [ ] 데이터가 비어 있을 때의 fallback UI/행동 유지

### 3) 문서 정합성
- [ ] `S-02`/`S-07` 흐름과 구현 간 불일치 해소 확인

---

## 🧪 테스트 계획

### Unit/Integration (`PresetSelection.test.tsx`)
- [ ] 프리셋 클릭 시 `/workout`으로 이동하는지 검증
- [ ] 이동 시 `state.exercises`가 매핑된 형태로 전달되는지 검증

### Unit/Integration (`Workout.test.tsx`)
- [ ] 라우터 state 기반 데이터로 화면이 렌더링되는지 검증
- [ ] 기존 temp fallback 동작 유지 검증

### Regression
- [ ] 프리셋 선택 후 “선택된 것처럼만 보이고 이동하지 않는” 회귀 재발 방지

---

## ✅ 완료 기준

- [ ] 프리셋 선택 시 `S-07`로 즉시 이동
- [ ] `Workout`에서 선택한 프리셋 기반 운동 정보가 표시됨
- [ ] 관련 테스트 통과 및 회귀 테스트 추가 완료
